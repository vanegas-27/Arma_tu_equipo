{% extends "base.html" %}
{% block title %}Inicio - Arma tu equipo{% endblock %}

{% block head %}
<style>
.arqueros-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    margin-top: 40px;
}
.arquero-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.arquero-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
}
.arquero-avatar {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #0f756e 0%, #14a085 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
    overflow: hidden;
}
.arquero-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.arquero-avatar svg {
    width: 40px;
    height: 40px;
    color: white;
}
.arquero-card h3 {
    margin: 0 0 16px;
    font-size: 1.25rem;
    color: #1a1a2e;
}
.arquero-stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
    padding: 16px 0;
    border-top: 1px solid #eee;
    border-bottom: 1px solid #eee;
}
.arquero-stat {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.stat-label {
    font-size: 0.75rem;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.stat-value {
    font-size: 1.1rem;
    font-weight: 700;
    color: #1a1a2e;
}
.btn-block {
    width: 100%;
}

.modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}
.modal-overlay.active {
    display: flex;
}
.modal-content {
    background: white;
    border-radius: 20px;
    padding: 32px;
    max-width: 450px;
    width: 100%;
    position: relative;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}
.modal-close {
    position: absolute;
    top: 16px;
    right: 16px;
    background: none;
    border: none;
    font-size: 28px;
    color: #666;
    cursor: pointer;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.2s;
}
.modal-close:hover {
    background: #f5f5f5;
}
.modal-header {
    text-align: center;
    margin-bottom: 24px;
}
.modal-avatar {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #0f756e 0%, #14a085 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
    overflow: hidden;
}
.modal-avatar img {
    display: none;
}
.modal-avatar svg {
    width: 40px;
    height: 40px;
    color: white;
}
.modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    color: #1a1a2e;
}
.modal-stats {
    display: flex;
    justify-content: space-around;
    padding: 20px 0;
    border-top: 1px solid #eee;
    border-bottom: 1px solid #eee;
    margin-bottom: 24px;
}
.modal-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}
.modal-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.modal-actions .btn {
    width: 100%;
    text-align: center;
}
.delay-1 { animation-delay: 0.1s; }
.delay-2 { animation-delay: 0.2s; }
.delay-3 { animation-delay: 0.3s; }
.delay-4 { animation-delay: 0.4s; }
</style>
{% endblock %}

{% block content %}

<!-- HERO SECTION -->
<section class="hero">
    <div class="hero-bg">
        <img src="{{ url_for('static', filename='img/banner1.jpg') }}" alt="Arquero atajando">
    </div>
    <div class="hero-overlay"></div>
    <div class="hero-content animate-fade-in-up">
        <div class="hero-badge">Plataforma #1 en Colombia</div>
        <h1>Encuentra el <span>arquero ideal</span> para tu partido</h1>
        <p>Agenda de forma rapida y segura. Elige entre arqueros verificados, compara precios y asegura tu arco en minutos.</p>
        <div class="hero-actions">
            {% if current_user.is_authenticated %}
                {% if current_user.rol == 'normal' %}
                    <a href="{{ url_for('routes.agendar') }}" class="btn btn-primary btn-lg">Agendar ahora</a>
                    <a href="{{ url_for('routes.mis_partidos') }}" class="btn btn-outline-light btn-lg">Mis partidos</a>
                {% else %}
                    <a href="{{ url_for('routes.partidos_asignados') }}" class="btn btn-primary btn-lg">Ver mis asignaciones</a>
                {% endif %}
            {% else %}
                <a href="{{ url_for('auth.register') }}" class="btn btn-primary btn-lg">Crear cuenta gratis</a>
                <a href="{{ url_for('auth.login') }}" class="btn btn-outline-light btn-lg">Ya tengo cuenta</a>
            {% endif %}
        </div>
    </div>
    <div class="hero-scroll">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
        </svg>
    </div>
</section>

<!-- HOW IT WORKS -->
<section class="section section-alt">
    <div class="container">
        <div class="section-header animate-fade-in-up">
            <span class="section-tag">Como funciona</span>
            <h2>Agenda tu arquero en 3 simples pasos</h2>
            <p>Sin complicaciones. Registrate, elige y juega. Asi de facil.</p>
        </div>
        <div class="steps-grid">
            <div class="step-card animate-fade-in-up delay-1">
                <div class="step-number">1</div>
                <h3>Crea tu cuenta</h3>
                <p>Registrate gratis como usuario o como arquero. Solo necesitas tu correo y unos datos basicos.</p>
            </div>
            <div class="step-card animate-fade-in-up delay-2">
                <div class="step-number">2</div>
                <h3>Elige tu arquero</h3>
                <p>Selecciona fecha, hora, ubicacion y el arquero que mejor se ajuste a tus necesidades y presupuesto.</p>
            </div>
            <div class="step-card animate-fade-in-up delay-3">
                <div class="step-number">3</div>
                <h3>Confirma y juega</h3>
                <p>El arquero recibe la solicitud, confirma el partido y listo. Solo queda disfrutar el juego.</p>
            </div>
        </div>
    </div>
</section>

<!-- WHY CHOOSE US -->
<section class="section">
    <div class="container">
        <div class="section-header animate-fade-in-up">
            <span class="section-tag">Por que elegirnos</span>
            <h2>Todo lo que necesitas para armar tu partido</h2>
            <p>Hemos creado la herramienta perfecta para conectar jugadores con arqueros confiables.</p>
        </div>
        <div class="features-grid">
            <div class="feature-card animate-fade-in-up delay-1">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <h3>Arqueros verificados</h3>
                <p>Cada arquero en nuestra plataforma ha sido verificado. Conoce su experiencia y anos tapando antes de reservar.</p>
            </div>
            <div class="feature-card animate-fade-in-up delay-2">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                </div>
                <h3>Agenda flexible</h3>
                <p>Elige la fecha y hora que te convenga. Nuestro sistema muestra disponibilidad en tiempo real.</p>
            </div>
            <div class="feature-card animate-fade-in-up delay-3">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                </div>
                <h3>Precios transparentes</h3>
                <p>Cada arquero tiene su tarifa visible. Sin costos ocultos, sin sorpresas. Pagas lo justo.</p>
            </div>
            <div class="feature-card animate-fade-in-up delay-4">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                </div>
                <h3>Comunicacion directa</h3>
                <p>El estado de cada partido se actualiza en tu panel. Sabes si fue confirmado, pendiente o cancelado.</p>
            </div>
            <div class="feature-card animate-fade-in-up delay-5">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                </div>
                <h3>Estadisticas detalladas</h3>
                <p>Lleva el control de tus partidos, gasto total y frecuencia con graficos claros y faciles de leer.</p>
            </div>
            <div class="feature-card animate-fade-in-up delay-5">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </div>
                <h3>Comunidad activa</h3>
                <p>Unete a cientos de jugadores y arqueros que ya usan la plataforma cada semana.</p>
            </div>
        </div>
    </div>
</section>

<!-- ARQUEROS SECTION -->
{% if arqueros %}
<section class="section">
    <div class="container">
        <div class="section-header animate-fade-in-up">
            <span class="section-tag">Nuestros Arqueros</span>
            <h2>Conoce a los mejores arqueros</h2>
            <p>Arqueros verificados y listos para tu proximo partido</p>
        </div>
        <div class="arqueros-grid">
            {% for a in arqueros %}
            <div class="arquero-card animate-fade-in-up delay-{{ loop.index }}">
                <div class="arquero-avatar">
                    {% if a.usuario.foto %}
                    <img src="{{ url_for('static', filename='uploads/' + a.usuario.foto) }}" alt="{{ a.usuario.nombre }}">
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    {% endif %}
                </div>
                <h3>{{ a.usuario.nombre }} {{ a.usuario.apellido }}</h3>
                <div class="arquero-stats">
                    <div class="arquero-stat">
                        <span class="stat-label">Años tapando</span>
                        <span class="stat-value">{{ a.años_tapando }}</span>
                    </div>
                    <div class="arquero-stat">
                        <span class="stat-label">Calificacion</span>
                        <span class="stat-value">{% if a.calificacion > 0 %}{{ "%.1f"|format(a.calificacion) }}{% else %}Nuevo{% endif %}</span>
                    </div>
                    <div class="arquero-stat">
                        <span class="stat-label">Por hora</span>
                        <span class="stat-value">${{ "{:,.0f}".format(a.precio_por_hora) }}</span>
                    </div>
                </div>
                <button class="btn btn-primary btn-block" onclick="openModal({{ a.id }}, '{{ a.usuario.nombre }}', '{{ a.usuario.apellido }}', {{ a.años_tapando }}, {{ a.precio_por_hora }}, {{ a.calificacion }}, '{{ a.usuario.foto if a.usuario.foto else '' }}')">Ver mas</button>
            </div>
            {% endfor %}
        </div>
        <div style="text-align: center; margin-top: 40px;">
            <a href="{{ url_for('routes.arqueros') }}" class="btn btn-accent btn-lg">Ver todos los arqueros</a>
        </div>
    </div>
</section>

<!-- MODAL -->
<div class="modal-overlay" id="arqueroModal" onclick="closeModal(event)">
    <div class="modal-content animate-fade-in-up" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div class="modal-header">
            <div class="modal-avatar">
                <img src="" alt="" id="modalImagen" style="display: none; width: 100%; height: 100%; object-fit: cover;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
            </div>
            <h2 id="modalNombre"></h2>
        </div>
        <div class="modal-body">
            <div class="modal-stats">
                <div class="modal-stat">
                    <span class="stat-label">Años tapando</span>
                    <span class="stat-value" id="modalAños"></span>
                </div>
                <div class="modal-stat">
                    <span class="stat-label">Valor por hora</span>
                    <span class="stat-value" id="modalPrecio"></span>
                </div>
                <div class="modal-stat">
                    <span class="stat-label">Calificacion</span>
                    <span class="stat-value" id="modalCalif"></span>
                </div>
            </div>
            <div class="modal-actions">
                <a href="#" id="modalLinkDetalle" class="btn btn-outline-primary">Ver perfil completo</a>
                {% if current_user.is_authenticated and current_user.rol == 'normal' %}
                    <a href="{{ url_for('routes.agendar') }}" class="btn btn-primary">Agendar partido</a>
                {% elif not current_user.is_authenticated %}
                    <a href="{{ url_for('auth.login') }}" class="btn btn-primary">Iniciar sesion para agendar</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- ABOUT US -->
<section class="section section-alt">
    <div class="container">
        <div class="about-grid">
            <div class="about-image animate-fade-in-up">
                <img src="{{ url_for('static', filename='img/banner2.jpg') }}" alt="Equipo celebrando">
            </div>
            <div class="about-text animate-fade-in-up delay-2">
                <span class="section-tag">Acerca de nosotros</span>
                <h2>Nacimos de la cancha</h2>
                <p>Somos un grupo de apasionados por el futbol que se cansaron de buscar arquero por grupos de WhatsApp. Creamos <strong>Arma tu equipo</strong> para resolver ese problema de una vez por todas.</p>
                <p>Nuestra mision es simple: conectar jugadores con arqueros de forma rapida, confiable y transparente. Que lo unico que tengas que pensar sea en jugar.</p>
                <div class="about-stats">
                    <div class="about-stat">
                        <div class="about-stat-number">500+</div>
                        <div class="about-stat-label">Partidos agendados</div>
                    </div>
                    <div class="about-stat">
                        <div class="about-stat-number">120+</div>
                        <div class="about-stat-label">Arqueros activos</div>
                    </div>
                    <div class="about-stat">
                        <div class="about-stat-number">15+</div>
                        <div class="about-stat-label">Ciudades</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FIELD IMAGE SECTION -->
<section class="section" style="padding: 0;">
    <div style="width: 100%; height: 400px; overflow: hidden; position: relative;">
        <img src="{{ url_for('static', filename='img/banner3.jpg') }}" alt="Cancha de futbol" style="width: 100%; height: 100%; object-fit: cover;">
        <div style="position: absolute; inset: 0; background: linear-gradient(to right, rgba(15,118,110,0.7), rgba(15,118,110,0.3));"></div>
        <div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;">
            <p style="color: white; font-size: clamp(1.25rem, 2.5vw, 1.75rem); font-weight: 700; text-align: center; max-width: 600px; padding: 0 24px; line-height: 1.4;">
                "El mejor arquero no es el que mas ataja, sino el que siempre esta cuando lo necesitas."
            </p>
        </div>
    </div>
</section>

<!-- CTA SECTION -->
<section class="cta-section">
    <div class="cta-content animate-fade-in-up">
        <h2>Listo para armar tu proximo partido?</h2>
        <p>Registrate hoy y encuentra el arquero perfecto en minutos. Es gratis, rapido y sin compromiso.</p>
        {% if current_user.is_authenticated %}
            {% if current_user.rol == 'usuario' %}
                <a href="{{ url_for('routes.agendar') }}" class="btn btn-accent btn-lg">Agendar un partido</a>
            {% else %}
                <a href="{{ url_for('routes.mis_partidos') }}" class="btn btn-accent btn-lg">Ver mis partidos</a>
            {% endif %}
        {% else %}
            <a href="{{ url_for('auth.register') }}" class="btn btn-accent btn-lg">Crear cuenta gratis</a>
        {% endif %}
    </div>
</section>

{% endblock %}

{% block scripts %}
<script>
function openModal(id, nombre, apellido, años, precio, calificacion, foto) {
    document.getElementById('modalNombre').textContent = nombre + ' ' + apellido;
    document.getElementById('modalAños').textContent = años + ' años';
    document.getElementById('modalPrecio').textContent = '$' + precio.toLocaleString('es-CO');
    document.getElementById('modalCalif').textContent = calificacion > 0 ? calificacion.toFixed(1) : 'Nuevo';
    document.getElementById('modalLinkDetalle').href = '/arquero/' + id;
    
    var modalImg = document.getElementById('modalImagen');
    if (foto && foto !== '') {
        modalImg.src = '/static/uploads/' + foto;
        modalImg.style.display = 'block';
    } else {
        modalImg.style.display = 'none';
    }
    
    document.getElementById('arqueroModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal(event) {
    if (!event || event.target.classList.contains('modal-overlay')) {
        document.getElementById('arqueroModal').classList.remove('active');
        document.body.style.overflow = '';
    }
}

document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeModal();
    }
});
</script>
{% endblock %}
